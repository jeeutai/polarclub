def show_home_tab(user):
    st.markdown("### ğŸ“¢ ê³µì§€ì‚¬í•­")
    
    # Quick stats
    col1, col2, col3, col4 = st.columns(4)
    
    clubs_df = st.session_state.data_manager.load_csv('clubs')
    assignments_df = st.session_state.data_manager.load_csv('assignments')
    user_clubs_df = st.session_state.data_manager.load_csv('user_clubs')
    
    with col1:
        st.markdown(f"""
        <div class="metric-card">
            <h2 style="color: #FF6B6B; margin: 0;">{len(clubs_df)}</h2>
            <p style="margin: 5px 0 0 0; color: #666;">ì „ì²´ ë™ì•„ë¦¬</p>
        </div>
        """, unsafe_allow_html=True)
    
    with col2:
        my_clubs = user_clubs_df[user_clubs_df['username'] == user['username']]
        st.markdown(f"""
        <div class="metric-card">
            <h2 style="color: #4ECDC4; margin: 0;">{len(my_clubs)}</h2>
            <p style="margin: 5px 0 0 0; color: #666;">ë‚´ ë™ì•„ë¦¬</p>
        </div>
        """, unsafe_allow_html=True)
    
    with col3:
        pending_assignments = len(assignments_df[assignments_df['status'] == 'active']) if not assignments_df.empty else 0
        st.markdown(f"""
        <div class="metric-card">
            <h2 style="color: #FFA726; margin: 0;">{pending_assignments}</h2>
            <p style="margin: 5px 0 0 0; color: #666;">ì§„í–‰ì¤‘ ê³¼ì œ</p>
        </div>
        """, unsafe_allow_html=True)
    
    with col4:
        points_df = st.session_state.data_manager.load_csv('points')
        my_points = points_df[points_df['username'] == user['username']]['points'].sum() if not points_df.empty else 0
        st.markdown(f"""
        <div class="metric-card">
            <h2 style="color: #AB47BC; margin: 0;">{my_points}</h2>
            <p style="margin: 5px 0 0 0; color: #666;">ë‚´ í¬ì¸íŠ¸</p>
        </div>
        """, unsafe_allow_html=True)
    
    # My clubs
    st.markdown("### ğŸª ë‚´ ë™ì•„ë¦¬")
    my_clubs_data = st.session_state.data_manager.get_user_clubs(user['username'])
    
    if my_clubs_data.empty:
        st.info("ì•„ì§ ê°€ì…í•œ ë™ì•„ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.")
    else:
        for _, club in my_clubs_data.iterrows():
            with st.container():
                st.markdown(f"""
                <div class="club-card">
                    <h4>{club['icon']} {club['name']}</h4>
                    <p>{club['description']}</p>
                    <p><strong>íšŒì¥:</strong> {club['president']}</p>
                    <p><a href="https://meet.google.com/dbx-ozrs-bma">íšŒì˜ ë§í¬(ì „ì²´ ì „ìš©)</a></p>
                </div>
                """, unsafe_allow_html=True)

def show_board_tab(user):
    st.markdown("### ğŸ“‹ ê²Œì‹œíŒ")
    
    # Post creation
    if st.button("ğŸ“ ìƒˆ ê¸€ ì‘ì„±"):
        st.session_state.show_post_form = True
    
    if st.session_state.get('show_post_form', False):
        with st.form("new_post"):
            title = st.text_input("ì œëª©")
            content = st.text_area("ë‚´ìš©")
            club_options = ["ì „ì²´"] + st.session_state.data_manager.get_user_clubs(user['username'])['club_name'].tolist()
            selected_club = st.selectbox("ë™ì•„ë¦¬ ì„ íƒ", club_options)
            
            if st.form_submit_button("ê²Œì‹œ"):
                if title and content:
                    st.session_state.data_manager.add_post(
                        user['username'], title, content, selected_club
                    )
                    st.success("ê¸€ì´ ê²Œì‹œë˜ì—ˆìŠµë‹ˆë‹¤!")
                    st.session_state.show_post_form = False
                    st.rerun()
    
    # Display posts
    posts_df = st.session_state.data_manager.load_csv('posts')
    if not posts_df.empty:
        posts_df = posts_df.sort_values('timestamp', ascending=False)
        
        for _, post in posts_df.iterrows():
            with st.container():
                st.markdown(f"""
                <div class="club-card">
                    <h4>{post['title']}</h4>
                    <p>{post['content'][:200]}{'...' if len(post['content']) > 200 else ''}</p>
                    <small>ğŸ‘¤ {post['author']} | ğŸ“… {post['timestamp']} | ğŸ·ï¸ {post['club']}</small>
                </div>
                """, unsafe_allow_html=True)

def show_chat_tab(user):
    st.session_state.chat_system.show_chat_interface(user)

def show_schedule_tab(user):
    st.markdown("### ğŸ“… ì¼ì •í‘œ")
    
    # Add schedule (for authorized users)
    if user['role'] in ['ì„ ìƒë‹˜', 'íšŒì¥', 'ë¶€íšŒì¥']:
        with st.expander("â• ìƒˆ ì¼ì • ì¶”ê°€"):
            with st.form("add_schedule"):
                title = st.text_input("ì¼ì • ì œëª©")
                description = st.text_area("ì„¤ëª…")
                schedule_date = st.date_input("ë‚ ì§œ")
                club_options = ["ì „ì²´"] + st.session_state.data_manager.load_csv('clubs')['name'].tolist()
                selected_club = st.selectbox("ëŒ€ìƒ ë™ì•„ë¦¬", club_options)
                
                if st.form_submit_button("ì¼ì • ì¶”ê°€"):
                    if title and schedule_date:
                        st.session_state.data_manager.add_schedule(
                            title, description, schedule_date, selected_club, user['username']
                        )
                        st.success("ì¼ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!")
                        st.rerun()
    
    # Display schedule
    schedule_df = st.session_state.data_manager.load_csv('schedule')
    if not schedule_df.empty:
        schedule_df['date'] = pd.to_datetime(schedule_df['date'])
        schedule_df = schedule_df.sort_values('date')
        
        for _, event in schedule_df.iterrows():
            with st.container():
                st.markdown(f"""
                <div class="club-card">
                    <h4>ğŸ“… {event['title']}</h4>
                    <p>{event['description']}</p>
                    <p><strong>ë‚ ì§œ:</strong> {event['date'].strftime('%Y-%m-%d')}</p>
                    <p><strong>ë™ì•„ë¦¬:</strong> {event['club']}</p>
                </div>
                """, unsafe_allow_html=True)

def show_assignment_tab(user):
    st.session_state.assignment_system.show_assignment_interface(user)

def show_report_tab(user):
    if user['role'] in ['ì„ ìƒë‹˜', 'íšŒì¥']:
        st.session_state.report_generator.show_report_interface(user)
    else:
        st.warning("ë³´ê³ ì„œ ì‘ì„± ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.")

def show_admin_tab(user):
    if user['role'] != 'ì„ ìƒë‹˜':
        st.warning("ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.")
        return
    
    st.markdown("### ğŸ“Š ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ")
    
    # Statistics
    col1, col2, col3, col4 = st.columns(4)
    
    accounts_df = st.session_state.data_manager.load_csv('accounts')
    clubs_df = st.session_state.data_manager.load_csv('clubs')
    posts_df = st.session_state.data_manager.load_csv('posts')
    assignments_df = st.session_state.data_manager.load_csv('assignments')
    
    with col1:
        st.metric("ì „ì²´ ì‚¬ìš©ì", len(accounts_df))
    with col2:
        st.metric("ì „ì²´ ë™ì•„ë¦¬", len(clubs_df))
    with col3:
        st.metric("ì „ì²´ ê²Œì‹œê¸€", len(posts_df))
    with col4:
        st.metric("ì „ì²´ ê³¼ì œ", len(assignments_df))
    
    # Management sections
    tab1, tab2, tab3, tab4 = st.tabs(["ğŸ‘¥ ê³„ì • ê´€ë¦¬", "ğŸª ë™ì•„ë¦¬ ê´€ë¦¬", "ğŸ“Š í†µê³„", "ğŸ’¾ ë°ì´í„°"])
    
    with tab1:
        show_account_management()
    
    with tab2:
        show_club_management()
    
    with tab3:
        show_statistics()
    
    with tab4:
        show_data_management()

def show_account_management():
    st.markdown("#### ê³„ì • ìƒì„±")
    
    with st.form("create_account"):
        col1, col2 = st.columns(2)
        with col1:
            username = st.text_input("ì•„ì´ë””")
            password = st.text_input("ë¹„ë°€ë²ˆí˜¸")
            name = st.text_input("ì´ë¦„")
        
        with col2:
            roles = ["ë™ì•„ë¦¬ì›", "íšŒì¥", "ë¶€íšŒì¥", "ì´ë¬´", "ê¸°ë¡ë¶€ì¥", "ë””ìì¸ë‹´ë‹¹", "ì„ ìƒë‹˜"]
            role = st.selectbox("ì§ê¸‰", roles)
            clubs_df = st.session_state.data_manager.load_csv('clubs')
            club_options = clubs_df['name'].tolist() if not clubs_df.empty else []
            selected_clubs = st.multiselect("ì†Œì† ë™ì•„ë¦¬", club_options)
        
        if st.form_submit_button("ê³„ì • ìƒì„±"):
            if username and password and name:
                success = st.session_state.data_manager.create_account(
                    username, password, name, role
                )
                if success:
                    for club in selec